import QtQuick 2.4
import "CuteEngine"
import "var.js" as Var

Map {
    id: map
    source: "qrc:/resources/map01.png"
    row: 30
    col: 22
    player: Char { }

    BGM { source: "qrc:/resources/bgm05.mp3" }

    mapWarps: [
        MapWarp {
            blockX: 0; blockY: 27; receiver: "map"; message: "map02"
            onActivated: { Var.wrapToX = 0; Var.wrapToY = 3 }
        }
    ]

    mapItems: [
        ChatItem {
            blockX: 11; blockY: 15; pic: false
            text: ["Castle of Hope."]
        },
        ChatItem {
            blockX: 10; blockY: 14; pic: true
            text: ["Enter Code?", Var.knowCode ? "3690" : "...", ""]
            onIndexChanged: {
                if (index == 3 && Var.knowCode)
                    Var.gameEnd()
                else if (index == 3) Var.dialog.visible = false
            }
        }
    ]

    npcs: [
        Zombie {
            blockX: 11; blockY: 27; move: "lllllllllrrrrrrrrruuuuuuuuuulddddddddd"
        }
    ]

    mapProperty: [
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9],
        [0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]
    ]

    Component.onCompleted: {
        Var.currentMap = this
        player.blockX = Var.wrapToX
        player.blockY = Var.wrapToY
        init()
    }
}

